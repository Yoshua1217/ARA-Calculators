<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARA Field Tools</title>
  <style>
    :root{
      --bg:#0f1520;
      --card:#121821;
      --edge:#1d2633;
      --text:#e6eef7;
      --muted:#94a7ba;
      --blue:#6bb8ff;
      --green:#35d399;
      --amber:#ffcc66;
      --pill:#192334;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}

    .header{background:linear-gradient(180deg, rgba(15,21,32,.96), rgba(15,21,32,.85));backdrop-filter:blur(6px);border-bottom:1px solid var(--edge);padding:8px 12px;position:sticky;top:0;z-index:50}
    .header-inner{max-width:900px;margin:auto;display:flex;flex-direction:column;gap:6px}
    .header-top{display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:8px;font-weight:800;font-size:18px;letter-spacing:.2px}
    .brand .logo{width:22px;height:22px;border-radius:6px;background:linear-gradient(180deg,#203149,#162234);border:1px solid var(--edge);display:flex;align-items:center;justify-content:center}
    .brand .logo::after{content:"ðŸŒ²";font-size:14px}

    .hud-line{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:space-between}
    .pill{background:var(--pill);border:1px solid var(--edge);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}
    .btn{appearance:none;border:1px solid var(--edge);background:#172235;color:var(--text);padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    .btn:active{transform:translateY(1px)}

    .gps-dot{width:10px;height:10px;border-radius:999px;border:1px solid var(--edge);background:#485464}
    .gps-dot.green{background:var(--green)}
    .gps-dot.amber{background:var(--amber)}
    .gps-dot.gray{background:#59697c}

    .tabs{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;border-bottom:1px solid var(--edge);padding:8px;background:rgba(18,24,33,.6)}
    .tab-btn{appearance:none;border:1px solid var(--edge);background:#121821;color:var(--text);padding:8px 12px;border-radius:999px;cursor:pointer;font-weight:600}
    .tab-btn.active{outline:2px solid var(--blue)}

    .wrap{max-width:900px;margin:auto;padding:12px}
    .panel{display:none;padding:12px}
    .panel.active{display:block}

    .card{background:var(--card);border:1px solid var(--edge);border-radius:18px;padding:12px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    label{display:block;font-size:12px;color:var(--muted);margin:6px 0 4px}
    input,select,textarea{width:100%;padding:10px;border-radius:12px;border:1px solid var(--edge);background:#0f1520;color:var(--text)}
    textarea{min-height:80px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>*{flex:1}
    .mt{margin-top:10px}.metric-note{font-size:11px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="header">
    <div class="header-inner">
      <div class="header-top">
        <div class="brand"><span class="logo"></span><span>ARA Field Tools</span></div>
        <button class="btn" id="unitToggle">Meters (m)</button>
      </div>
      <div class="hud-line">
        <div class="pill">Tree: <input id="treeName" placeholder="New tree" style="background:none;border:none;color:var(--text);width:120px"></div>
        <div class="hud-line"><div class="gps-dot gray" id="gpsDot"></div><div class="pill" id="hudText">GPS Â± â€” m â€¢ 00:00</div></div>
        <button class="btn" id="btnNew">New Tree</button>
        <button class="btn" id="btnClear">Clear</button>
      </div>
    </div>
    <div class="tabs">
      <button class="tab-btn active" data-tab="general">General</button>
      <button class="tab-btn" data-tab="location">Location</button>
      <button class="tab-btn" data-tab="circ">Circumference</button>
      <button class="tab-btn" data-tab="height">Height</button>
      <button class="tab-btn" data-tab="canopy">Canopy</button>
      <button class="tab-btn" data-tab="results">Results</button>
    </div>
  </div>

  <div class="wrap">
    <section class="panel active" id="tab-general">
      <div class="card">
        <label>Species</label>
        <input id="species" placeholder="e.g., Plains Cottonwood">
        <label>Condition</label>
        <select id="condition">
          <option value="">Selectâ€¦</option>
          <option>Excellent</option>
          <option>Good</option>
          <option>Fair</option>
          <option>Poor</option>
          <option>Dead</option>
        </select>
        <label>Notes</label>
        <textarea id="notes"></textarea>
      </div>
    </section>

    <section class="panel" id="tab-location">
      <div class="card">
        <h2>Location</h2>
        <div class="row">
          <div class="pill">Status: <span id="locStatus">Idle</span></div>
          <div class="pill">Accuracy: <span id="accPill">Â± â€” m</span></div>
          <button class="btn" id="btnLive">Live Track</button>
        </div>
        <div class="row mt">
          <div><label>Latitude</label><input id="lat" placeholder="â€”"></div>
          <div><label>Longitude</label><input id="lon" placeholder="â€”"></div>
        </div>
      </div>
    </section>

    <section class="panel" id="tab-circ">
      <div class="card">
        <h2>Circumference</h2>
        <label>Tree type</label>
        <select id="trunkType"><option>Single trunk</option><option>Multi-trunk</option></select>
        <div id="singleCirc"><label>Circumference</label><input id="circVal" placeholder="e.g., 3.10"></div>
        <div id="multiCirc" style="display:none">
          <div class="row mt" id="stems"></div>
          <button class="btn mt" id="addStem">+ Add trunk</button>
          <div class="metric-note mt">Effective circumference: <span id="effCirc">â€”</span></div>
        </div>
        <div class="metric-note mt">Largest trunk: <span id="largestTrunk">â€”</span></div>
      </div>
    </section>

    <section class="panel" id="tab-height"><div class="card"><h2>Height</h2></div></section>
    <section class="panel" id="tab-canopy"><div class="card"><h2>Canopy</h2></div></section>
    <section class="panel" id="tab-results"><div class="card"><h2>Results</h2></div></section>
  </div>

  <script>
    const $ = sel => document.querySelector(sel);
    const $$ = sel => document.querySelectorAll(sel);
    const num = v => parseFloat(v)||0;

    $$('.tab-btn').forEach(b=>b.addEventListener('click',()=>{
      $$('.tab-btn').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      const id=b.dataset.tab;
      $$('.panel').forEach(p=>p.classList.remove('active'));
      $('#tab-'+id).classList.add('active');
    }));

    $('#trunkType').addEventListener('change',()=>{
      const multi=$('#trunkType').value!=='Single trunk';
      $('#singleCirc').style.display=multi?'none':'block';
      $('#multiCirc').style.display=multi?'block':'none';
    });

    const stems=[];
    function renderStems(){
      const s=$('#stems');
      s.innerHTML='';
      stems.forEach((v,i)=>{
        const div=document.createElement('div');
        div.innerHTML=`<input class="stem" data-i="${i}" placeholder="Trunk ${i+1}" value="${v}"/>`;
        s.appendChild(div);
      });
      const vals=stems.map(num).filter(x=>x>0);
      if(vals.length){
        const eff=Math.sqrt(vals.reduce((a,v)=>a+v*v,0));
        $('#effCirc').textContent=eff.toFixed(2);
        const max=Math.max(...vals);
        $('#largestTrunk').textContent=max.toFixed(2);
      }else{$('#effCirc').textContent='â€”';$('#largestTrunk').textContent='â€”';}
    }

    $('#addStem').addEventListener('click',()=>{stems.push('');renderStems();});
    $('#stems').addEventListener('input',e=>{if(e.target.classList.contains('stem')){const i=+e.target.dataset.i;stems[i]=e.target.value;renderStems();}});
  </script>
</body>
</html>